# –û–ø–∏—Å–∞–Ω–∏–µ API GophKeeper

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### `POST /api/register`

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "login": "user@example.com",
  "password_hash": "<base64>",
  "salt": "<base64>"
}
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK` ‚Äî —É—Å–ø–µ—à–Ω–æ
- `409 Conflict` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `400 Bad Request` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

---

### `POST /api/login`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–ª–∏ –ø–æ –ª–æ–≥–∏–Ω—É.

**–ó–∞–ø—Ä–æ—Å:**

```json
{ "login": "user@example.com" }
```

**–û—Ç–≤–µ—Ç:**

```json
{ "salt": "<base64>" }
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `404 Not Found` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `400 Bad Request`

---

### `POST /api/authenticate`

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ª–æ–≥–∏–Ω—É –∏ —Ö—ç—à—É –ø–∞—Ä–æ–ª—è.

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "login": "user@example.com",
  "password_hash": "<base64>"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "access_token": "...",
  "refresh_token": "...",
  "expires_in": 1800
}
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `401 Unauthorized` ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- `400 Bad Request`

---

### `POST /api/refresh`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token —Å –ø–æ–º–æ—â—å—é refresh token. Refresh token —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–∏ —ç—Ç–æ–º.

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "refresh_token": "<uuid>"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "access_token": "...",
  "refresh_token": "...", 
  "expires_in": 1800
}
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `401 Unauthorized` ‚Äî refresh token –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- `400 Bad Request` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞

---

## –†–∞–±–æ—Ç–∞ —Å –∑–∞–ø–∏—Å—è–º–∏ (passwords, notes, cards)

### `POST /api/passwords`

### `POST /api/notes`

### `POST /api/cards`

–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏

> –•–æ—Ç—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö –º–µ—Ç–æ–¥–æ–≤, **—Ñ–æ—Ä–º–∞—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ****\`\`**** (–¥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è) –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∑–∞–ø–∏—Å–∏** –∏ –¥–æ–ª–∂–µ–Ω —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
>
> –ü—Ä–∏–º–µ—Ä—ã –¥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:
>
> - –ü–∞—Ä–æ–ª–∏: `{ "login": "user@example.com", "password": "123456" }`
> - –ö–∞—Ä—Ç—ã: `{ "number": "4111111111111111", "expiry": "12/26", "cvv": "123" }`
> - –ó–∞–º–µ—Ç–∫–∏: `{ "title": "admin panel", "content": "https://admin.example.com" }`

**–ó–∞–ø—Ä–æ—Å:**

```json
{
  "label": "gmail",
  "metadata": "–ø–æ—á—Ç–∞",
  "data": "<base64-–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π-–±–ª–æ–∫>"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{ "id": "abc123", "version": 1 }
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `409 Conflict` ‚Äî label —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `400 Bad Request`
- `401 Unauthorized`

---

## –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

### `POST /api/files`

–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (multipart)

**–ü–æ–ª—è:**

- `label`: —Å—Ç—Ä–æ–∫–∞
- `metadata`: —Å—Ç—Ä–æ–∫–∞
- `file`: —Ñ–∞–π–ª (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π)

**–û—Ç–≤–µ—Ç:**

```json
{ "id": "file001", "version": 1 }
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `409 Conflict`
- `400 Bad Request`
- `401 Unauthorized`

---

### `GET /api/files/:label/download`

–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –µ–≥–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–û—Ç–≤–µ—Ç:**

- `200 OK`

  - –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞: –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ—Ç–æ–∫

- `404 Not Found`

- `401 Unauthorized`

---

## üìÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

### `GET /api/records/:label`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ –∫–ª—é—á—É (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤)

**–û—Ç–≤–µ—Ç:**

```json
{
  "id": "abc123",
  "type": "password",
  "label": "gmail",
  "metadata": "...",
  "data": "<base64>",
  "version": 3
}
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `404 Not Found`
- `401 Unauthorized`

---

### `PUT /api/records/:label`

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ (—Å OCC)

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**

```
If-Version: 3
```

**–¢–µ–ª–æ (–¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤/–ø–∞—Ä–æ–ª–µ–π/–∫–∞—Ä—Ç):**

```json
{
  "metadata":  "...",
  "data": "<base64>"
}
```

**–¢–µ–ª–æ (–¥–ª—è —Ñ–∞–π–ª–æ–≤, multipart):**

- `metadata`, `file`, `label` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

**–û—Ç–≤–µ—Ç:**

```json
{ "version": 4 }
```

**–û—Ç–≤–µ—Ç—ã:**

- `200 OK`
- `409 Conflict` ‚Äî –≤–µ—Ä—Å–∏—è –Ω–µ —Å–æ–≤–ø–∞–ª–∞
- `404 Not Found`
- `401 Unauthorized`

